# Portfolio Assignment: Final Project

## Data Model

### Boats

| Property | Data Type | Valid Values | Notes |
| --- | --- | --- | --- |
| id | Integer |  | The id of the boat. (auto generated by Datastore) |
| name | String | Length min 0, max 150 | Name of the boat. |
| type | String | Length min 0, max 150 | Type of the boat. E.g., Sailboat, Catamaran, etc. |
| length | Integer | min 0 | The length of the boat in feet. |
| loads | List |  | List of current loads on the boat. |
| owner | String | JWT sub | The id of the boat owner. |

### Load

| Property | Data Type | Valid Values | Notes |
| --- | --- | --- | --- |
| id | Integer |  | The id of the load. (auto generated by Datastore) |
| volume | Integer | min 0 | The volume of the load |
| item | String | Length min 0, max 150 | Description of the item in the load. |
| carrier | Integer (nullable) |  | The id of the boat to which the load belongs. If the load is not on any boat, this can be null. |
| creation_date | Date | date in mm/dd/yyy format | Date the load was created. |

### User

| Property | Data Type | Notes |
| --- | --- | --- |
| id | Integer | auto generated by Datastore - for internal use. |
| user_id | String | Sub from JWT. |
| name | String | Userâ€™s name. |
| email | String | Userâ€™s email address. |

### User entity to non-user entity relationship

There is a relationship between `Users` and `Boats`. When you create a boat with a valid JWT token that boat belongs to you.  Your unique ID becomes the Owner property in the Boats model. This is a one to many relationship, one user can have many boats, but a boat can only have one owner.

---

## Forming a Request

### Authorization

Authorization is handled by the `Authorization` header using a Bearer token. The token must be a valid JWT which is obtained once you login to the application on the frontend. If try to access a protected endpoint without authorization you will receive the following. 

*Note: protected endpoints are indicated with a ðŸ”’.*

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Failure  | 401 Unauthorized |  |

Response Examples

`Failure`

```json
Status: 401 Unauthorized
{
    "Error": "jwt malformed"
}
```

`Failure`

```json
Status: 401 Unauthorized
{
    "Error": "No authorization token was found"
}
```

If you request a resource and are authorized you should expect normal functioning as detailed bellow.

### MIME Accept

All API endpoints expect your request to accept `application/json` if your request doesnâ€™t accept this format you will receive the following.

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Failure  | 406 Not Acceptable |  |

Response Examples

`Failure`

```json
Status: 406 Not Acceptable
{
    "Error": "Invalid Accept type provided. Acceptable types are: application/json. You provided: text/html."
}
```

---

## Get Users

Allows anyone to see a list of the current users.

<aside>
ðŸ”— GET /users

</aside>

**Response**

Response Statuses

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Success | 200 OK |  |

Response Examples

`Success`

```json
Status: 200 OK
[
  {
    "user_id": "google-oauth2|102688216908491308011",
    "name": "Guru Updesh Singh",
    "email": "guruupdeshsingh@gmail.com"
  }
]
```

## Create a BoatðŸ”’

Allows you to create a new boat.

<aside>
ðŸ”— POST /boats

</aside>

**Request**

| Name | Description | Required? |
| --- | --- | --- |
| name | The name of the boat. | Yes |
| type | Type of the boat. E.g., Sailboat, Catamaran, etc. | Yes |
| length | Length of the boat in feet. | Yes |

**Request Body Example**

```json
{
    "name": "Sea Witch",
	  "type": "Catamaran",
    "length": 28
}
```

**Response**

Response Statuses

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Success | 201 Created |  |
| Failure  | 400 Bad Request | If any of the required attributes are missing. |

Response Examples

`Success`

```json
Status: 201 Created
{
    "id": 5109928196833280,
    "name": "Sea Witch",
    "type": "Catamaran",
    "length": 28,
    "owner": "google-oauth2|102688216908491308011",
    "loads": [],
    "self": "https://cs-493-final-project-407120.uw.r.appspot.com/boats/5109928196833280",
		"root": "https://cs-493-final-project-407120.uw.r.appspot.com/boats"
}
```

`Failure`

```json
Status: 400 Bad Request
{
    "Error": "The request object is missing at least one of the required attributes"
}
```

## View a BoatðŸ”’

Allows you to get an existing boat.

<aside>
ðŸ”— GET /boats/:boat_id

</aside>

**Request**

`Path Parameters`

| Name | Description |
| --- | --- |
| boat_id | ID of the boat |

**Response**

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Success | 200 OK |  |
| Failure  | 404 Not Found | No boat with this boat_id exists. |
| Failure | 403 Forbidden | You donâ€™t own this boat. |

Response Examples

`Success`

```json
Status: 200 OK
{
    "owner": "google-oauth2|102688216908491308011",
    "name": "Sea Witch",
    "length": 28,
    "type": "Catamaran",
    "loads": [
        {
            "id": 5416694759555072,
            "self": "https://cs-493-final-project-407120.uw.r.appspot.com/loads/5416694759555072"
        }
    ],
    "id": 6243479118151680,
    "self": "https://cs-493-final-project-407120.uw.r.appspot.com/boats/6243479118151680",
		"root": "https://cs-493-final-project-407120.uw.r.appspot.com/boats"
}
```

`Failure`

```json
Status: 404 Not Found
{
    "Error": "No boat with this boat_id exists"
}
```

`Failure`

```json
Status: 403 Forbidden
{
    "Error": "You do not own this boat"
}
```

## View all BoatsðŸ”’

Lists the boats, 5 per page.

<aside>
ðŸ”— GET /boats?cursor=:cursor

</aside>

**Request**

`Query Parameters`  - optional

| Name | Description |
| --- | --- |
| cursor | Cursor for pagination. |

**Response**

Response Statuses

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Success | 200 OK |  |

Response Examples

`Success`

```json
Status: 200 OK
{
    "boats": [
        {
            "owner": "google-oauth2|102688216908491308011",
            "name": "Calypso",
            "length": 13,
            "type": "Sailing Boat",
            "id": 5387605013168128,
            "loads": [],
            "self": "https://cs-493-final-project-407120.uw.r.appspot.com/boats/5387605013168128"
        },
        {
            "owner": "google-oauth2|102688216908491308011",
            "name": "Sea Witch - edit",
            "length": 28,
            "type": "Catamaran",
            "id": 5480582465191936,
            "loads": [],
            "self": "https://cs-493-final-project-407120.uw.r.appspot.com/boats/5480582465191936"
        },
        // 3 more boats... (5 per page)
    ],
    "total": 6,
    "next": "https://cs-493-final-project-407120.uw.r.appspot.com/boats?cursor=CjoSNGofenV3fmNzLTQ5My1maW5hbC1wcm9qZWN0LTQwNzEyMHIRCxIEQm9hdBiAgICE7MyACwwYACAA"
}
```

*Note: the next attribute will not be included on the last page.*

## Update a BoatðŸ”’

Allows you to edit the properties of a boat.

<aside>
ðŸ”— PATCH /boats/:boat_id

</aside>

**Request**

`Path Parameters`

| Name | Description |
| --- | --- |
| boat_id | ID of the boat |

| Name | Description | Required? |
| --- | --- | --- |
| name | The name of the boat. | No |
| type | Type of the boat. E.g., Sailboat, Catamaran, etc. | No |
| length | Length of the boat in feet. | No |

**Request Body Example**

```json
{
    "name": "Sea Witch - Edited"
}
```

**Response**

Response Statuses

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Success | 200 OK | Responds with updated boat. |
| Failure  | 404 Not Found | No boat with this boat_id exists. |
| Failure | 403 Forbidden | You donâ€™t own this boat. |

Response Examples

`Success`

```json
Status: 200 Ok
{
    "id": 5109928196833280,
    "name": "Sea Witch - Edited",
    "type": "Catamaran",
    "length": 28,
    "owner": "google-oauth2|102688216908491308011",
    "loads": [],
    "self": "https://cs-493-final-project-407120.uw.r.appspot.com/boats/5109928196833280",
		"root": "https://cs-493-final-project-407120.uw.r.appspot.com/boats"
}
```

`Failure`

```json
Status: 404 Not Found
{
    "Error": "No boat with this boat_id exists"
}
```

`Failure`

```json
Status: 403 Forbidden
{
    "Error": "You do not own this boat"
}
```

## Delete a BoatðŸ”’

Allows you to delete a boat. Note that this will unload any loads that were loaded on to the boat but will not delete them.

<aside>
ðŸ”— DELETE /boats/:boat_id

</aside>

**Request**

`Path Parameters`

| Name | Description |
| --- | --- |
| boat_id | ID of the boat |

**Response**

Response Statuses

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Success | 204 No Content |  |
| Failure  | 404 Not Found | No boat with this boat_id exists. |
| Failure | 403 Forbidden | You donâ€™t own this boat. |

Response Examples

`Success`

```json
Status: 204 No Content
```

`Failure`

```json
Status: 404 Not Found
{
    "Error": "No boat with this boat_id exists"
}
```

`Failure`

```json
Status: 403 Forbidden
{
    "Error": "You do not own this boat"
}
```

## Create a Load

Allows you to create a new load.

<aside>
ðŸ”— POST /loads

</aside>

**Request**

| Name | Description | Required? |
| --- | --- | --- |
| volume | The volume of the load. | Yes |
| item | Item in the load. | Yes |
| creation_date | The date mm/dd/yyy the load was created. | Yes |

**Request Body Example**

```json
{
  "volume": 3,
  "item": "Food",
  "creation_date": "10/19/2021"
}
```

**Response**

Response Statuses

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Success | 201 Created |  |
| Failure  | 400 Bad Request | If any of the required attributes are missing. |

Response Examples

`Success`

```json
Status: 201 Created
{
    "id": 4872136191639552,
    "volume": 5,
    "item": "LEGO Blocks",
    "carrier": null,
    "creation_date": "10/18/2021",
    "self": "https://cs-493-final-project-407120.uw.r.appspot.com/loads/4872136191639552",
		"root": "https://cs-493-final-project-407120.uw.r.appspot.com/loads"
}
```

`Failure`

```json
Status: 400 Bad Request
{
    "Error": "The request object is missing at least one of the required attributes"
}
```

## View a Load

Allows you to get an existing load.

<aside>
ðŸ”— GET /loads/:load_id

</aside>

**Request**

`Path Parameters`

| Name | Description |
| --- | --- |
| load_id | ID of the load |

**Response**

Response Statuses

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Success | 200 OK |  |
| Failure  | 404 Not Found | No load with this load_id exists |

Response Examples

`Success`

```json
Status: 200 OK
{
    "volume": 5,
    "item": "LEGO Blocks",
    "carrier": {
        "id": 5083538508480512,
        "name": "Sea Witch",
        "self": "https://cs-493-final-project-407120.uw.r.appspot.com/boats/5083538508480512"
    },
    "creation_date": "10/18/2021",
    "id": 6192604894986240,
    "self": "https://cs-493-final-project-407120.uw.r.appspot.com/loads/6192604894986240",
		"root": "https://cs-493-final-project-407120.uw.r.appspot.com/loads"
}
```

`Failure`

```json
Status: 404 Not Found
{
    "Error": "No load with this load_id exists"
}
```

## View all Loads

List all the loads.

<aside>
ðŸ”— GET /loads?cursor=:cursor

</aside>

**Request**

`Query Parameters`  - optional

| Name | Description |
| --- | --- |
| cursor | Cursor for pagination. |

**Response**

Response Statuses

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Success | 200 OK |  |

Response Examples

`Success`

```json
Status: 200 OK
{
    "loads": [
        {
            "volume": 10,
            "item": "Stuffed Animals",
            "carrier": {
                "id": 5421418888036352,
                "name": "Lucifer",
                "self": "https://cs-493-final-project-407120.uw.r.appspot.com/boats/5421418888036352"
            },
            "creation_date": "10/19/2021",
            "id": 4648999252393984,
            "self": "https://cs-493-final-project-407120.uw.r.appspot.com/loads/4648999252393984"
        },
        {
            "volume": 4,
            "item": "Toys",
            "carrier": {
                "id": 6207473266458624,
                "name": "Lucifer",
                "self": "https://cs-493-final-project-407120.uw.r.appspot.com/boats/6207473266458624"
            },
            "creation_date": "10/21/2021",
            "id": 4688579959717888,
            "self": "https://cs-493-final-project-407120.uw.r.appspot.com/loads/4688579959717888"
        },
				// 3 more loads... (5 per page)
    ],
		"total": 6,
    "next": "https://cs-493-final-project-407120.uw.r.appspot.com/loads?cursor=Ci8SKWoUenV3fmFzc2lnbm1lbnQtNC1hcGlyEQsSBExvYWQYgICA2Onl0wgMGAAgAA=="
}
```

## Update a Load

Allows you to edit a loadâ€™s properties.

<aside>
ðŸ”— PATCH /loads/:load_id

</aside>

**Request**

`Path Parameters`

| Name | Description |
| --- | --- |
| load_id | ID of the load |

| Name | Description | Required? |
| --- | --- | --- |
| volume | The volume of the load. | No |
| item | Item in the load. | No |
| creation_date | The date mm/dd/yyy the load was created. | No |

**Request Body Example**

```json
{
  "volume": 15
}
```

**Response**

Response Statuses

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Success | 200 OK | Responds with the updated load. |
| Failure  | 404 Not Found | No load with this load_id exists. |

Response Examples

`Success`

```json
Status: 200 OK
{
    "id": 4872136191639552,
    "volume": 15,
    "item": "LEGO Blocks",
    "carrier": null,
    "creation_date": "10/18/2021",
    "self": "https://cs-493-final-project-407120.uw.r.appspot.com/loads/4872136191639552",
		"root": "https://cs-493-final-project-407120.uw.r.appspot.com/loads"
}
```

`Failure`

```json
Status: 404 Not Found
{
    "Error": "No load with this load_id exists"
}
```

## Delete a Load

Allows you to delete a load. Note that this will unload the load if it was being carried.

<aside>
ðŸ”— DELETE /loads/:load_id

</aside>

**Request**

`Path Parameters`

| Name | Description |
| --- | --- |
| load_id | ID of the load |

**Response**

Response Statuses

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Success | 204 No Content |  |
| Failure  | 404 Not Found | No load with this load_id exists. |

Response Examples

`Success`

```json
Status: 204 No Content
```

`Failure`

```json
Status: 404 Not Found
{
    "Error": "No load with this load_id exists"
}
```

## Assign Load to a BoatðŸ”’

Allows you to assign a load to a boat.

<aside>
ðŸ”— PUT boats/:boat_id/loads/:load_id

</aside>

**Request**

`Path Parameters`

| Name | Description |
| --- | --- |
| boat_id | ID of the boat |
| load_id | ID of the load |

**Response**

Response Statuses

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Success | 204 No Content | Succeeds only if the load isn't assigned to a boat. |
| Failure  | 403 Forbidden | The load is already loaded on another boat or you do not own the boat. |
| Failure  | 404 Not Found | The specified boat and/or load does not exist. |

Response Examples

`Success`

```json
Status: 204 No Content
```

`Failure`

```json
Status: 403 Forbidden
{
    "Error": "The load is already loaded on another boat"
}
```

`Failure`

```json
Status: 404 Not Found
{
    "Error": "The specified boat and/or load does not exist"
}
```

## Remove Load from a BoatðŸ”’

Allows you to remove a load from a boat.

<aside>
ðŸ”— DELETE boats/:boat_id/loads/:load_id

</aside>

**Request**

`Path Parameters`

| Name | Description |
| --- | --- |
| boat_id | ID of the boat |
| load_id | ID of the load |

**Response**

Response Statuses

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Success | 204 No Content | Succeeds only if the load is assigned to this boat. |
| Failure  | 403 Forbidden | The load is already loaded on another boat or you do not own the boat. |
| Failure  | 404 Not Found | The specified boat and/or load does not exist. |

Response Examples

`Success`

```json
Status: 204 No Content
```

`Failure`

```json
Status: 403 Forbidden
{
    "Error": "The load is already loaded on another boat"
}
```

`Failure`

```json
Status: 404 Not Found
{
    "Error": "No boat with this boat_id is loaded with the load with this load_id"
}
```

## Un-allowed Endpoints

<aside>
ðŸ”— PUT boats

</aside>

<aside>
ðŸ”— PUT loads

</aside>

**Response**

Response Statuses

| Outcome | Status Code | Notes |
| --- | --- | --- |
| Failure  | 405 Method Not Allowed |  |

`Failure`

```json
Status: 405 Method Not Allowed
```
